<include file="Public:header"/>
<script type="text/javascript" src="{$Think.const.HUI_ADMIN_LIB}jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="{$Think.const.HUI_ADMIN_LIB}../h-ui/js/H-ui.js"></script>
<title>添加用户 - 校园佣兵</title>
</head>
<body>
<article class="page-container">
    <form action="{:U('Home/User/insertUser')}" method="post" class="form form-horizontal" id="form-member-add" enctype="multipart/form-data">
        <div class="row cl">
           <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>用户名：</label>
           <div class="formControls col-xs-8 col-sm-9">
              <input type="text" class="input-text" value="" placeholder="" id="username" name="username">
           </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>昵称：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="" placeholder="" id="nickname" name="nickname">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>性别：</label>
            <div class="formControls col-xs-8 col-sm-9 skin-minimal">
                <div class="radio-box">
                    <input name="sex" type="radio" id="sex-1" value="0" checked>
                    <label for="sex-1">男</label>
                </div>
                <div class="radio-box">
                    <input type="radio" id="sex-2" name="sex" value="1">
                    <label for="sex-2">女</label>
                </div>
                <div class="radio-box">
                    <input type="radio" id="sex-3" name="sex" value="2">
                    <label for="sex-3">保密</label>
                </div>
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>出生日期：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="date" class="input-text" value="" placeholder="" id="birthday" name="birthday">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>密码：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="password" class="input-text" value="" placeholder="" id="password" name="password">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>验证密码：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="password" class="input-text" value="" placeholder="" id="checkPassword" name="checkPassword">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>手机：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" value="" placeholder="" id="phoneNumber" name="phoneNumber">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>邮箱：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <input type="text" class="input-text" placeholder="@" name="email" id="email">
            </div>
        </div>
        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3">附件：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <span class="btn-upload form-group">
				<input class="input-text upload-url" type="text" name="uploadfile" id="uploadfile" readonly nullmsg="请添加附件！" style="width:200px"><a href="javascript:void(0);" class="btn btn-primary radius upload-btn"><i class="Hui-iconfont">&#xe642;</i> 浏览文件</a>
				<input type="file" multiple name="files"  class="input-file" id="files">
				</span>
            </div>
        </div>

        <div class="row cl">
            <label class="form-label col-xs-4 col-sm-3">个性签名：</label>
            <div class="formControls col-xs-8 col-sm-9">
                <textarea name="beizhu" cols="" rows=""  id="beizhu" class="textarea"  placeholder="写出属于你的个性签名" onkeyup="$('#beizhu').Huitextarealength({
	minlength:4,
	maxlength:100
});" ></textarea>
                <p class="textarea-numberbar"><em class="textarea-length">0</em>/100</p>
            </div>
        </div>
        <div class="row cl">
            <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
                <input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
            </div>
        </div>
    </form>
</article>
<include file="Public:footer">
    <!--请在下方写此页面业务相关的脚本-->

<script type="text/javascript" src="{$Think.const.HUI_ADMIN_LIB}My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="{$Think.const.HUI_ADMIN_LIB}jquery.validation/1.14.0/jquery.validate.min.js"></script>
<script type="text/javascript" src="{$Think.const.HUI_ADMIN_LIB}jquery.validation/1.14.0/validate-methods.js"></script>
<script type="text/javascript" src="{$Think.const.HUI_ADMIN_LIB}jquery.validation/1.14.0/messages_zh.js"></script>
    <script type="text/javascript" src="{$Think.const.HUI_JS_URL}H-ui.min.js"></script>
    <script type="text/javascript" src="{$Think.const.HUI_ADMIN_LIB}layer/2.4/layer.js"></script>
       <script type="text/javascript">
       $(function(){
           /*
           $('.skin-minimal input').iCheck({
               checkboxClass: 'icheckbox-blue',
               radioClass: 'iradio-blue',
               increaseArea: '20%'
           });
       */
           $("#form-member-add").validate({

               rules:{
                   username:{
                       required:true,
                       minlength:2,
                       maxlength:16
                   },
                   sex:{
                       required:true,
                   },
                   phoneNumber:{
                       required:true,
                       isMobile:true,
                   },
                   email:{
                       required:true,
                       email:true,
                   },
                   files:{
                       required:true,
                   },
                   nickname:{
                       required:true,
                   },
                   password:{
                       required:true,
                       rangelength:[6,12],
                   },

                   checkPassword:{
                       required:true,
                       equalTo:"#password",
                   },
                  beizhu:{
                      required:true,
                  },

               },

               onkeyup:false,
               focusCleanup:true,
               success:"valid",
               submitHandler:function(form){
                   //$(form).ajaxSubmit();
                   //form.submit()
                   $(form).ajaxSubmit(
                          {
                              success:function(data){
                                  if (data.flag) {

                                      layer.msg(data.information,{icon:1},function(){
                                          parent.location.reload(); // 父页面刷新
                                          var index = parent.layer.getFrameIndex(window.name); //获取窗口索引
                                          parent.layer.close(index);
                                      });
                                  }
                                  else {
                                      layer.msg(data.information,{icon:1},function(){
                                          window.location.reload(); // 父页面刷新

                                      });
                                  }
                              }
                          }
                   );

                   //var index = parent.layer.getFrameIndex(window.name);
                   // alert("hello");
                   //parent.$('.btn-refresh').click();
                   // parent.layer.close(index);
               }
           });
       });
   </script>
<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>